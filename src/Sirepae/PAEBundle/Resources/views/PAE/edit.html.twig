{% extends 'SirepaePAEBundle:PAE:index.html.twig' %}

{% block content -%}
    <div class="col-sm-12">
        <div class="pull-left">
            <h1 class="title">{{ entity }}</h1>
        </div>
        <div class="pull-right">
            {{ form(delete_form) }}
        </div>
    </div>

    {{ form(edit_form) }}

<div class="btn-group btn-group-lg pull-right">
    <a class="btn btn-default" href="{{ path('pae') }}">Volver</a>
    <a class="btn btn-success" href="{{ path('calificacion_new',{id: entity.id}) }}">Calificar</a>
</div>
<div class="clearfix"></div>
<div class="row">
    <div class="col-sm-4">
        <div class="panel panel-primary">
            <div class="panel-heading">
                Libro NANDA
            </div>
            <div class="panel-body">
                {% if nanda is defined and nanda is not null %}
                <div class="panel-group" id="libro-nanda">
                    {% for dominio in nanda.dominios %}
                    <div class="panel panel-default">
                        <div class="panel-heading">
                            Dominio "{{ dominio.codigo }}": {{ dominio.nombre }}
                        </div>
                        <div class="panel-body">
                            <div class="panel-group panel-integrate" id="clases-dominio-{{ dominio.id }}">
                                {% for clase in dominio.clases %}
                                <div class="panel panel-default">
                                    <div class="panel-heading">
                                        <a data-toggle="collapse" data-parent="#clases-dominio-{{ dominio.id }}" href="#clase-{{ clase.id }}-dominio-{{ dominio.id }}">
                                            {{ clase.nombre }}
                                        </a>
                                    </div>
                                    <div id="clase-{{ clase.id }}-dominio-{{ dominio.id }}" class="panel-collapse collapse">
                                        <div class="panel-body">
                                            <p>
                                                {{ clase.descripcion }}
                                            </p>
                                            <div class="panel-group" id="diagnosticos-clase-{{ clase.id }}-dominio-{{ dominio.id }}">
                                                {% for diagnostico in clase.diagnosticos %}
                                                <div class="panel panel-default">
                                                    <div class="panel-heading">
                                                        <a data-toggle="collapse" data-parent="#diagnosticos-clase-{{ clase.id }}-dominio-{{ dominio.id }}" href="#actividades-{{ diagnostico.id }}">
                                                            {{ diagnostico.nombre }}
                                                        </a>
                                                    </div>
                                                    <div class="panel-body">
                                                        <p>
                                                            {{ diagnostico.definicion }}
                                                        </p>
                                                        <div class="panel-group" id="evidencias-diagnostico{{ diagnostico.id }}-clase-{{ clase.id }}-dominio-{{ dominio.id }}">
                                                            {% if diagnostico.evidencias is not empty %}
                                                            <div class="panel panel-default">
                                                                <div class="panel-heading">
                                                                    <a data-toggle="collapse" data-parent="#evidencias-diagnostico{{ diagnostico.id }}-clase-{{ clase.id }}-dominio-{{ dominio.id }}" href="#evidencias-{{ diagnostico.id }}">
                                                                        Evidencias
                                                                    </a>
                                                                </div>
                                                                <div id="evidencias-{{ diagnostico.id }}" class="panel-collapse collapse">
                                                                    {% for evidencia in diagnostico.evidencias %}
                                                                        <div class="list-group">
                                                                            <a href="{{ path('toggle_diagnostico_to_pae_e',{'id_pae': entity.id, 'id_diagnostico': diagnostico.id, 'id_evidencia': evidencia.id}) }}"  class="list-group-item{{ entity.existEvidenciaDiagnostico(evidencia)?' active':'' }} ajax" title="{{ evidencia.descripcion }}">
                                                                                {{ evidencia.nombre }}
                                                                            </a>
                                                                        </div>
                                                                    {% endfor %}
                                                                </div>
                                                            </div>
                                                            {% endif %}
                                                            {% if diagnostico.factoresRelacionados is not empty %}
                                                            <div class="panel panel-default">
                                                                <div class="panel-heading">
                                                                    <a data-toggle="collapse" data-parent="#factores-relacionados-diagnostico{{ diagnostico.id }}-clase-{{ clase.id }}-dominio-{{ dominio.id }}" href="#factores-relacionados-{{ diagnostico.id }}">
                                                                        Factores Relacionados
                                                                    </a>
                                                                </div>
                                                                <div id="factores-relacionados-{{ diagnostico.id }}" class="panel-collapse collapse">
                                                                    {% for factorRelacionado in diagnostico.factoresRelacionados %}
                                                                        <div class="list-group">
                                                                            <a href="{{ path('toggle_diagnostico_to_pae_fr',{'id_pae': entity.id, 'id_diagnostico': diagnostico.id, 'id_factorRelacionado': factorRelacionado.id}) }}"  class="list-group-item{{ entity.existFactorRelacionadoDiagnostico(factorRelacionado)?' active':'' }} ajax" title="{{ factorRelacionado.descripcion }}">
                                                                                {{ factorRelacionado.nombre }}
                                                                            </a>
                                                                        </div>
                                                                    {% endfor %}
                                                                </div>
                                                            </div>
                                                            {% endif %}
                                                        </div>
                                                    </div>
                                                </div>
                                                {% endfor %}
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                {% endfor %}
                            </div>
                        </div>
                    </div>
                    {% endfor %}
                </div>
                {% endif %}
            </div>
            <div class="panel-heading">
                
            </div>
        </div>
    </div>
    <div class="col-sm-4">
        <div class="panel panel-primary">
            <div class="panel-heading">
                Libro NOC
            </div>
            <div class="panel-body">
                {% if noc is defined and noc is not null %}
                <div class="panel-group" id="libro-noc">
                    {% for resultadoEsperado in noc.resultadosEsperados %}
                    <div class="panel panel-default">
                        <div class="panel-heading">
                            {{ resultadoEsperado.nombre }} <span class="text-muted">({{ resultadoEsperado.codigo }})</span>
                        </div>
                        <div class="panel-body">
                            <div class="panel-group panel-integrate" id="libro-noc-resultado-esperado">
                                <div class="panel panel-default">
                                    <div class="panel-heading">
                                        <a data-toggle="collapse" data-parent="#libro-noc-resultado-esperado" href="#resultado-esperado-{{ resultadoEsperado.id }}">
                                            {{ resultadoEsperado.dominio }} <br/> {{ resultadoEsperado.clase }}
                                        </a>
                                    </div>
                                    <div id="resultado-esperado-{{ resultadoEsperado.id }}" class="panel-collapse collapse in">
                                        <div class="panel-body">
                                            <p>
                                                {{ resultadoEsperado.definicion }}
                                            </p>
                                            <div class="panel-group panel" id="indicadores-resultado-esperado">
                                                <div class="panel panel-default">
                                                    <div class="panel-heading">
                                                        <a data-toggle="collapse" data-parent="#indicadores-resultado-esperado" href="#indicadores-resultado-esperado-{{ resultadoEsperado.id }}">
                                                            Indicadores
                                                        </a>
                                                    </div>
                                                    <div class="panel-body">
                                                        <div id="indicadores-resultado-esperado-{{ resultadoEsperado.id }}" class="panel-collapse collapse">
                                                            {% for indicador in resultadoEsperado.indicadores %}
                                                            <div class="panel-group panel" id="indicador-{{ indicador.id }}-resultado-esperado">
                                                                <div class="panel panel-default">
                                                                    <div class="panel-heading">
                                                                        <a data-toggle="collapse" data-parent="#indicador-{{ indicador.id }}-resultado-esperado" href="#escalas-indicador-{{ indicador.id }}-resultado-esperado-{{ resultadoEsperado.id }}">
                                                                            {{ indicador.definicion }}
                                                                        </a>
                                                                    </div>
                                                                    <div id="escalas-indicador-{{ indicador.id }}-resultado-esperado-{{ resultadoEsperado.id }}" class="panel-collapse collapse">
                                                                        <div class="list-group">
                                                                            {% for escala in resultadoEsperado.escalas %}
                                                                                <a href="{{ path('toggle_indicador_to_pae',{'id_pae': entity.id, 'id_indicador': indicador.id, 'id_escala': escala.id}) }}" class="list-group-item{{ entity.existIndicador(indicador,escala)?' active':'' }} ajax" title="{{ escala.descripcion }}">
                                                                                    {{ escala.nombre }} <span class="label label-success">{{ escala.valor }}</span>
                                                                                </a>
                                                                            {% endfor %}
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            {% endfor %}
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    {% endfor %}
                </div>
                {% endif %}
            </div>
            <div class="panel-heading">
                
            </div>
        </div>
    </div>
    <div class="col-sm-4">
        <div class="panel panel-primary">
            <div class="panel-heading">
                Libro NIC
            </div>
            <div class="panel-body">
                {% if nic is defined and nic is not null %}
                    {% for intervencion in nic.intervenciones %}
                    <div class="panel-group" id="intervencion-{{ intervencion.id }}">
                        <div class="panel panel-default">
                            <div class="panel-heading title">
                                <a data-toggle="collapse" data-parent="#intervencion-{{ intervencion.id }}" href="#actividades-intervencion-{{ intervencion.id }}">
                                    Intervención "{{ intervencion.nombre }}" <span class="text-muted">({{ intervencion.codigo }})</span>
                                </a>
                            </div>
                            <div id="actividades-intervencion-{{ intervencion.id }}" class="panel-collapse collapse">
                                <div class="panel-body">
                                    <p>
                                        {{ intervencion.descripcion }}
                                    </p>
                                </div>
                                <div class="list-group">
                                    {% for actividad in intervencion.actividades %}
                                    <a href="{{ path('toggle_actividad_to_pae',{'id_pae': entity.id, 'id_actividad': actividad.id}) }}" class="list-group-item{{ entity.existActividad(actividad)?' active':'' }} ajax">
                                        {{ actividad.nombre }}
                                    </a>
                                    {% endfor %}
                                </div>
                            </div>
                        </div>
                    </div>
                    {% endfor %}
                {% endif %}
            </div>
            <div class="panel-heading">
                
            </div>
        </div>
    </div>
</div>
{% endblock %}
